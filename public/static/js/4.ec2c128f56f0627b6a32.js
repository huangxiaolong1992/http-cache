webpackJsonp([4],{"1aQy":function(e,t){},"5mrn":function(e,t){},"9wJ9":function(e,t){},HahD:function(e,t){},LmyP:function(e,t,a){"use strict";var s=a("Dd8w"),n=a.n(s),r=a("2bvH"),i={data:function(){return{paginationShow:!0}},computed:n()({},Object(r.b)({pageTotal:"pageTotal"})),methods:{handleCurrentChange:function(e){this.$store.commit("PAGE",{pageTotal:this.pageTotal,pageNum:e})}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return this.paginationShow?t("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:this.pageTotal},on:{"current-change":this.handleCurrentChange}}):this._e()},staticRenderFns:[]},l=a("VU/8")(i,c,!1,null,null,null);t.a=l.exports},Ohrh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("zyNP"),n=a("Dd8w"),r=a.n(n),i=a("mvHQ"),c=a.n(i),l=a("2bvH"),o={data:function(){return{options:[{value:"选项5",label:"北京烤鸭"}],value:"",authList:[],active:"",roleId:"",isAdmin:0,curId:-1,newAuthUser:[]}},computed:r()({},Object(l.b)({authUser:"authUser",checkboxOrNode:"checkboxOrNode"})),watch:{authUser:function(){for(var e=0;e<20;e++)this.newAuthUser.push(this.authUser[e])}},created:function(){this.getRoleList()},methods:{close:function(){this.$store.commit("AUTHEDIT",{authEdit:!1})},getRoleList:function(){var e=this;this.$post(this.url+"/xhHlck/getXhRole").then(function(t){if(200==t.code){var a=JSON.parse(t.data).list;if(e.authList=a,e.authUser.length>1){for(var s=0,n=e.authList.length;s<n;s++)try{e.$refs.curId[s].className=""}catch(e){}return}e.getUserIdAuth()}else e.$message.error("新增失败")})},getUserIdAuth:function(){var e=this,t=new URLSearchParams;try{t.append("userId",this.authUser[0].userId)}catch(e){return}this.$post(this.url+"/xhHlck/getXhPower",t).then(function(t){if(200==t.code)try{for(var a=JSON.parse(t.data).list[0].roleId,s=0,n=e.authList.length;s<n;s++)e.authList[s].roleId==a&&(e.$refs.curId[s].className="active")}catch(e){}else e.$message.error("获取人员权限失败")})},addActive:function(e,t,a){if("active"==this.$refs.curId[e].className)this.$refs.curId[e].className="",this.curId=-1;else{for(var s=0,n=this.$refs.curId.length;s<n;s++)this.$refs.curId[s].className="";this.$refs.curId[e].className="active",this.curId=e}this.roleId=t,this.isAdmin=a},authSure:function(){for(var e=this,t=[],a=[],s=[],n=[],r=0,i=this.authUser.length;r<i;r++)t.push(this.authUser[r].userId),a.push(this.authUser[r].name),s.push(this.authUser[r].orgId),n.push(this.authUser[r].deptName);try{var c=this.$refs.curId[this.curId].getAttribute("roleId")}catch(e){}var l=new URLSearchParams;l.append("roleId",c),l.append("userId",t.join(",")),l.append("userName",a.join(",")),l.append("deptId",s.join(",")),l.append("deptName",n.join(",")),l.append("isAdmin",this.isAdmin),this.$post(this.url+"/xhHlck/addXhPower",l).then(function(t){200==t.code?(e.$message({message:"授权成功",type:"success"}),e.$store.commit("AUTHEDIT",{authEdit:!1})):e.$message.error("授权失败")})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mask"},[a("div",{staticClass:"auth"},[a("div",{staticClass:"close",on:{click:e.close}},[e._v("×")]),e._v(" "),a("h4",[e._v("人员授权")]),e._v(" "),a("div",{staticClass:"selected"},[a("p",[e._v("所选人员")]),e._v(" "),a("div",{staticClass:"selectedDiv"},e._l(e.authUser,function(t){return a("span",[e._v(e._s(t.name))])}),0)]),e._v(" "),a("div",{staticClass:"autoRole"},[a("p",[e._v("授权角色")]),e._v(" "),a("ul",{staticClass:"authList"},e._l(e.authList,function(t,s){return a("li",{ref:"curId",refInFor:!0,class:{active:s==e.curId},attrs:{roleId:t.roleId},on:{click:function(a){return e.addActive(s,t.roleId,t.isAdmin)}}},[e._v("\n          \t"+e._s(t.roleName)+"\n          ")])}),0)]),e._v(" "),a("div",{staticClass:"authSureDiv"},[a("el-button",{staticClass:"authSure",attrs:{type:"primary"},on:{click:e.authSure}},[e._v("确定")])],1)])])},staticRenderFns:[]};var u=a("VU/8")(o,h,!1,function(e){a("1aQy")},"data-v-5914d63c",null).exports,d={data:function(){return{checked:!0,tableData:[],allChecked:!1,paginationShow:!0,pageTotal:1,pageNum:1,noData:!0,pageType:1,flag:!0,checkedPeople:[],isDisabled:!1}},computed:r()({},Object(l.b)({orgId:"orgId",authEdit:"authEdit",searchPeople:"searchPeople",allPeoplePartId:"allPeoplePartId",checkboxOrNode:"checkboxOrNode",refreshPage:"refreshPage"})),watch:{orgId:function(){this.paginationShow=!1,this.$nextTick(function(){this.paginationShow=!0}),this.getPeopleList(this.orgId.orgId,1)},searchPeople:function(){this.tableData=[],this.pageTotal=this.searchPeople.length;for(var e=0,t=this.searchPeople.length;e<t;e++)this.tableData.push({userId:this.searchPeople[e].userId,name:this.searchPeople[e].name,orgId:this.searchPeople[e].orgId,userNum:this.searchPeople[e].userNum,deptName:this.searchPeople[e].eName})},refreshPage:function(){this.pageNum=1},allPeoplePartId:function(){this.getCurrentDeptAllPeople(this.allPeoplePartId,this.pageNum),this.getAllPeople(this.allPeoplePartId)}},methods:{checkeOne:function(e){var t=this.checkedPeople.findIndex(function(t,a,s){return t.userId==e.userId});-1==t?this.checkedPeople.push(e):this.checkedPeople.splice(t,1);0==this.checkedPeople&&(this.allChecked=!1),this.$store.commit("CURRENTCHECKAUTH",{data:(new Date).getTime(),currentCheckAuth:this.checkedPeople});for(var a=0,s=this.tableData.length;a<s;a++){if(!this.checkedPeople.includes(this.tableData[a]))return void(this.allChecked=!1);this.allChecked=!0}},checkeOAll:function(){var e=this;1==this.allChecked?this.tableData.forEach(function(t){t.checked=!0,e.checkedPeople.push(t)}):this.tableData.forEach(function(t){t.checked=!1;var a=e.checkedPeople.findIndex(function(e,a,s){return e.userId==t.userId});e.checkedPeople.splice(a,1)}),this.$store.commit("CURRENTCHECKAUTH",{data:(new Date).getTime(),currentCheckAuth:this.checkedPeople})},getAllPeople:function(e){var t=this,a=new URLSearchParams;a.append("orgId",e),this.$post(this.url+"/xhHlckTwo/getUserByOrgidAndSubDeptUser",a).then(function(e){if(200==e.code){var a=JSON.parse(e.data).list;0==a.length&&(t.checkedPeople=[],t.$store.commit("CURRENTCHECKAUTH",{data:(new Date).getTime(),currentCheckAuth:t.checkedPeople})),a.forEach(function(e){var a={checked:!0,userId:e.userId,name:e.name,orgId:e.orgId,userNum:e.userNum,deptName:e.eName};t.checkedPeople.push(a)}),t.$store.commit("CURRENTCHECKAUTH",{data:(new Date).getTime(),currentCheckAuth:t.checkedPeople})}})},getCurrentDeptAllPeople:function(e,t){var a=this,s=new URLSearchParams;s.append("orgId",e),s.append("pageNum",t),s.append("pageSize",10),this.$post(this.url+"/xhHlckTwo/getUserByOrgidAndSubDeptUser",s).then(function(e){if(200==e.code){a.isDisabled=!1,a.tableData=[];var t=JSON.parse(e.data),s=JSON.parse(e.data).list;if(a.pageTotal=t.total,0==s.length)return a.tableData=[],a.isDisabled=!0,void(a.allChecked=!1);for(var n=0,r=s.length;n<r;n++)a.tableData.push({checked:!0,userId:s[n].userId,name:s[n].name,orgId:s[n].orgId,userNum:s[n].userNum,deptName:s[n].eName});a.allChecked=!0,a.flag=!0}else a.$message.error("查询失败")})},getPeopleList:function(e,t){var a=this,s=new URLSearchParams;s.append("orgId",e),s.append("isEnable",1),s.append("isActive",1),s.append("isDeleted",0),s.append("secretLevel",0),s.append("pageNum",t),s.append("pageSize",10),this.$post(this.url+"/xhHlckTwo/getSysUser",s).then(function(e){if(200==e.code){a.tableData=[];var t=JSON.parse(e.data),s=JSON.parse(e.data).list;if(a.pageTotal=t.total,0==s.length)return a.tableData=[],a.isDisabled=!0,void(a.allChecked=!1);a.isDisabled=!1;for(var n=0,r=s.length;n<r;n++){var i={checked:-1!=c()(a.checkedPeople).indexOf(s[n].userId),userId:s[n].userId,name:s[n].name,orgId:s[n].orgId,userNum:s[n].userNum,deptName:s[n].eName};a.tableData.push(i),a.tableData.forEach(function(e){var t=0;1==e.checked?++t==a.tableData.length&&(a.allChecked=!0):a.allChecked=!1})}}else a.$message.error("新增失败")})},handleEdit:function(e,t,a,s){this.$store.commit("AUTHEDIT",{authEdit:!0}),this.$store.commit("AUTHEUSER",[{userId:e,name:t,orgId:a,deptName:s}])},handleCurrentChange:function(e){this.pageNum=e,1===this.checkboxOrNode?this.getCurrentDeptAllPeople(this.allPeoplePartId,e):this.getPeopleList(this.orgId.orgId,e)}},components:{pepleAuth:u}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tableData"},[e.authEdit?a("pepleAuth"):e._e(),e._v(" "),a("div",{staticClass:"listData"},[a("div",{staticClass:"dataHeader"},[a("div",[a("el-checkbox",{attrs:{disabled:e.isDisabled},on:{change:function(t){return e.checkeOAll()}},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}})],1),e._v(" "),a("div",{staticClass:"first"},[e._v("\n       用户名\n      ")]),e._v(" "),a("div",{staticClass:"first"},[e._v("\n       警号\n      ")]),e._v(" "),a("div",{staticClass:"first"},[e._v("\n       部门\n      ")]),e._v(" "),a("div",{staticClass:"first"},[e._v("\n       操作\n      ")])]),e._v(" "),a("div",{staticClass:"dataContent"},[a("ul",e._l(e.tableData,function(t){return a("li",[a("div",{staticClass:"data"},[a("el-checkbox",{on:{change:function(a){return e.checkeOne(t)}},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}})],1),e._v(" "),a("div",{staticClass:"data"},[e._v("\n           "+e._s(t.name)+"\n          ")]),e._v(" "),a("div",{staticClass:"data"},[e._v("\n            "+e._s(t.userNum)+"\n          ")]),e._v(" "),a("div",{staticClass:"data"},[e._v("\n            "+e._s(t.deptName)+"\n          ")]),e._v(" "),a("div",{staticClass:"data",on:{click:function(a){return e.handleEdit(t.userId,t.name,t.orgId,t.deptName)}}},[e._v("\n           授权\n          ")])])}),0)])]),e._v(" "),e.paginationShow?a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.pageTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("9wJ9")},"data-v-35a62116",null).exports,g=a("LmyP"),v={data:function(){return{tableData:[],curNum:1}},computed:r()({},Object(l.b)({manageRole:"manageRole",pageNum:"pageNum"})),watch:{manageRole:function(){this.getRoleList(1)},pageNum:function(e){e&&(this.curNum=this.pageNum,this.getRoleList(this.curNum))}},methods:{close:function(){this.$store.commit("MANAGEROLE",{manageRole:!1})},getRoleList:function(e){var t=this,a=new URLSearchParams;a.append("pageNum",this.curNum),a.append("pageSize",10),this.$post(this.url+"/xhHlck/getXhRole",a).then(function(e){if(200==e.code){var a=JSON.parse(e.data).list;t.tableData=a,t.$store.commit("PAGE",{pageTotal:JSON.parse(e.data).total})}else t.$message.error("获取失败")})},handleEdit:function(e){var t=this,a=new URLSearchParams;a.append("roleId",e),this.$post(this.url+"/xhHlck/deleteXhRole",a).then(function(e){200==e.code?(t.$message({message:"删除成功",type:"success"}),t.$store.commit("MANAGEROLE",{manageRole:!1})):t.$message.error("删除失败")})}},components:{paging:g.a}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.manageRole?a("div",{staticClass:"roleMask"},[a("div",{staticClass:"roleMaskContent"},[a("p",[e._v("管理角色")]),e._v(" "),a("div",{staticClass:"close",on:{click:e.close}},[e._v("×")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"角色名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.roleName))])]}}],null,!1,432477941)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row.roleId)}}},[e._v("删除\n\t        ")])]}}],null,!1,2107036173)})],1),e._v(" "),a("paging",{staticClass:"managePage"})],1)]):e._e()},staticRenderFns:[]};var k=a("VU/8")(v,f,!1,function(e){a("5mrn")},"data-v-7fde100b",null).exports,C={data:function(){return{input:"",options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],value:"所属部门",currentCheckArr:[]}},computed:r()({},Object(l.b)({currentCheckAuth:"currentCheckAuth"})),methods:{searchPeople:function(){var e=this;if(this.input){var t=new URLSearchParams;t.append("name",this.input),this.$post(this.url+"/xhHlckTwo/getSysUser",t).then(function(t){if(200==t.code){var a=JSON.parse(t.data).list;e.$store.commit("SEARCHPEOPLE",{searchPeople:a})}else e.$message.error("新增失败")})}else this.$message({message:"搜索内容不能为空",type:"warning"})},authorize:function(){this.currentCheckArr=[],this.$store.commit("AUTHEDIT",{authEdit:!0});for(var e=0,t=this.currentCheckAuth.length;e<t;e++)this.currentCheckArr.push({userId:this.currentCheckAuth[e].userId,name:this.currentCheckAuth[e].name,orgId:this.currentCheckAuth[e].orgId,deptName:this.currentCheckAuth[e].deptName});this.$store.commit("AUTHEUSER",this.deteleObject(this.currentCheckArr))}},components:{tableData:m,manageRole:k}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manageContent"},[a("div",{staticClass:"manageTop"},[a("el-input",{attrs:{placeholder:"请输入人员名字"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchPeople}},[e._v("搜索")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"380px"},attrs:{type:"primary"},on:{click:function(t){return e.authorize()}}},[e._v("授权")])],1),e._v(" "),a("div",{staticClass:"bottom"},[a("tableData"),e._v(" "),a("manageRole")],1)])},staticRenderFns:[]};var _=a("VU/8")(C,I,!1,function(e){a("nnNs")},"data-v-0288bbe2",null).exports,b={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{zTree:s.a,manageContent:_}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"systemManage"},[t("div",{staticClass:"zTreeLeft"},[t("zTree")],1),this._v(" "),t("div",{staticClass:"manageRight"},[t("manageContent")],1)])},staticRenderFns:[]};var P={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},components:{systemManage:a("VU/8")(b,N,!1,function(e){a("HahD")},"data-v-1407e95b",null).exports}},A={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"systemManage"},[this._m(0),this._v(" "),t("systemManage")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"systemManageTitle"},[t("p",[this._v("授权管理")])])}]};var U=a("VU/8")(P,A,!1,function(e){a("mn0R")},"data-v-3ba9b384",null);t.default=U.exports},mn0R:function(e,t){},nnNs:function(e,t){}});