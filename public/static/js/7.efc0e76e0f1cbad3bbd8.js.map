{"version":3,"sources":["webpack:///./src/assets/images/addItem.png","webpack:///src/pages/achievementDiscuss/activeAdd.vue","webpack:///./src/pages/achievementDiscuss/activeAdd.vue?26f8","webpack:///./src/pages/achievementDiscuss/activeAdd.vue"],"names":["module","exports","activeAdd","name","data","titleName","this","$route","query","title","activeNames","activeNums","valueTime","ipVoteAstrict","editorData","weight","item_id","image","activeData","vote_id","watch","val","IsInteger","Number","$message","message","type","handler","i","length","JudgeIsNaN","parseFloat","deep","computed","extends_default","Object","vuex_esm","userInfo","state","mutations","created","activityName","startDate","endDate","GetVoteList","activityId","verifyToken","methods","_this","accessToken","localStorage","getItem","url","api","configIp","net","params","$fetch","then","res","console","log","success","warning","setTimeout","$router","push","catch","err","obj","goBack","back","selectTime","value","isNaN","_this2","voteUrl","activityBlogList","activity_id","$post","code","items","limit_vote_num","SaveActivity","_this3","saveActivity","time","userId","id","nowTime","Date","getTime","createUser","saveVote","_this4","deadline","getdate","clearData","error","EditActivity","_this5","editActivity","addOptions","vote_num","is_delete","deleteOption","_this6","forEach","item","index","splice","components","achievementDiscuss_activeAdd","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","_s","attrs","rows","placeholder","onfocus","onblur","maxlength","model","callback","$$v","trim","expression","range-separator","start-placeholder","value-format","end-placeholder","change","_l","key","$set","$event","src","__webpack_require__","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"0DAAAA,EAAAC,QAAA,s3BCwSAC,GACAC,KAAA,kBACAC,KAFA,WAGA,OACAC,UAAAC,KAAAC,OAAAC,MAAAC,MACAC,YAAA,GACAC,WAAA,EACAC,aACAC,cAAA,GACAC,aACAL,MAAA,GACAM,OAAA,GACAC,QAAA,GACAC,MAAA,KAEAC,cACAC,QAAA,KAGAC,OACAP,cADA,SACAQ,GACA,IAAAA,GAAAf,KAAAgB,UAAAC,OAAAF,KACAf,KAAAkB,UACAC,QAAA,aACAC,KAAA,aAIAZ,YACAa,QAAA,SAAAN,GACA,QAAAO,EAAA,EAAAA,EAAAP,EAAAQ,OAAAD,IACAtB,KAAAwB,WAAAP,OAAAF,EAAAO,GAAAb,SAKAgB,WAAAV,EAAAO,GAAAb,QAAA,IACAT,KAAAkB,UACAC,QAAA,aACAC,KAAA,YAPApB,KAAAkB,UACAC,QAAA,aACAC,KAAA,aAUAM,MAAA,GAEAtB,YA3BA,SA2BAW,GACAf,KAAAK,WAAAU,EAAAQ,SAGAI,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EACAE,SAAA,SAAAC,GAAA,OAAAA,EAAAC,UAAAF,aAGAG,QAvDA,WAwDA,WAAAlC,KAAAD,UAAA,CACA,IAAAa,EAAAZ,KAAAC,OAAAC,MAAAU,WACAZ,KAAAY,aACAZ,KAAAI,YAAAQ,EAAAuB,aACAnC,KAAAM,WAAAM,EAAAwB,UAAAxB,EAAAyB,SACArC,KAAAsC,YAAA1B,EAAA2B,YAEAvC,KAAAwC,eAEAC,SAEAD,YAFA,WAEA,IAAAE,EAAA1C,KACA2C,EAAAC,aAAAC,QAAA,eACA,GAAAF,EAAA,CACA,IAAAG,EAAA9C,KAAA+C,IAAAC,SAAAhD,KAAAiD,IAAAT,YACAU,GACAP,eAEA3C,KAAAmD,OAAAL,EAAAI,GAAAE,KAAA,SAAAC,GACAC,QAAAC,IAAA,UAAAF,GACAA,EAAAG,UACAd,EAAAxB,SAAAuC,QAAA,gBACAC,WAAA,WACAhB,EAAAiB,QAAAC,MAAA/D,KAAA,WACA,QAEAgE,MAAA,SAAAC,GACAR,QAAAC,IAAA,OAAAO,OAKA9C,UAvBA,SAuBA+C,GACA,uBAAAA,KAAA,MAAAA,EAAA,GAEAC,OA1BA,WA2BAhE,KAAA2D,QAAAM,MAAA,IAEAC,WA7BA,SA6BAnD,GACAuC,QAAAC,IAAA,QAAAxC,GACAf,KAAAM,UAAAS,GAEAS,WAjCA,SAiCA2C,GACA,uBAAAA,IAAAC,MAAAD,IAGA7B,YArCA,SAqCAC,GAAA,IAAA8B,EAAArE,KACA8C,EAAA9C,KAAA+C,IAAAuB,QAAAtE,KAAAiD,IAAAsB,iBACArB,GACAsB,YAAAjC,GAEAvC,KAAAyE,MAAA3B,EAAAI,GAAAE,KAAA,SAAAC,GACAC,QAAAC,IAAA,UAAAF,GACA,KAAAA,EAAAqB,OACAL,EAAA7D,WAAA6C,EAAAvD,KAAA6E,MACAN,EAAA9D,cAAA8C,EAAAvD,KAAA8E,eACAP,EAAAxD,QAAAwC,EAAAvD,KAAAe,WAEAgD,MAAA,SAAAC,GACAR,QAAAC,IAAA,OAAAO,MAIAe,aAtDA,WAsDA,IAAAC,EAAA9E,KACA8C,EAAA9C,KAAA8C,IAAA9C,KAAAiD,IAAA8B,aACA5C,EAAAnC,KAAAI,YACA4E,EAAAhF,KAAAM,UACA2E,EAAAjF,KAAA+B,SAAAmD,GACAC,GAAA,IAAAC,MAAAC,UACA,OAAAlD,EAMA,GAAA6C,EAAA,GAMA,GAAAA,EAAA,GAAAG,EACAnF,KAAAkB,UACAC,QAAA,eACAC,KAAA,gBAHA,CAOA,IAAA8B,GACAf,eACAE,QAAA2C,EAAA,GACA5C,UAAA4C,EAAA,GACAM,WAAAL,EACA1E,cAAAP,KAAAO,eAEAP,KAAAyE,MAAA3B,EAAAI,GAAAE,KAAA,SAAAC,GAEA,KAAAA,EAAAqB,OACAI,EAAAS,SAAAlC,EAAAvD,MACAgF,EAAAjE,QAAA,MAEAgD,MAAA,SAAAC,GACAR,QAAAC,IAAA,OAAAO,UA1BA9D,KAAAkB,UACAC,QAAA,QACAC,KAAA,iBARApB,KAAAkB,UACAC,QAAA,UACAC,KAAA,aAkCAmE,SAjGA,SAiGAL,GAAA,IAAAM,EAAAxF,KACA8C,EAAA9C,KAAA+C,IAAAuB,QAAAtE,KAAAiD,IAAAsC,SACArC,GACArC,QAAAb,KAAAa,QACA2D,YAAAU,EACA/E,MAAAH,KAAAI,YACAqF,SAAAzF,KAAA0F,QAAA1F,KAAAM,UAAA,IACAqE,MAAA3E,KAAAQ,WACAoE,eAAA5E,KAAAO,eAEAP,KAAAyE,MAAA3B,EAAAI,GAAAE,KAAA,SAAAC,GACA,KAAAA,EAAAqB,MACAc,EAAAtE,UACAC,QAAA,OACAC,KAAA,YAEAoE,EAAAG,YACAH,EAAA7B,QAAAM,MAAA,IAEAuB,EAAAtE,SAAA0E,MAAA,WAEA/B,MAAA,SAAAC,GACAR,QAAAC,IAAA,OAAAO,MAIA+B,aA3HA,WA2HA,IAAAC,EAAA9F,KACA8C,EAAA9C,KAAA8C,IAAA9C,KAAAiD,IAAA8C,aACA5D,EAAAnC,KAAAI,YACA4E,EAAAhF,KAAAM,UACA2E,EAAAjF,KAAA+B,SAAAmD,GACAC,GAAA,IAAAC,MAAAC,UACA,OAAAlD,EAMA,GAAA6C,EAAA,GAMA,GAAAA,EAAA,GAAAG,EACAnF,KAAAkB,UACAC,QAAA,eACAC,KAAA,gBAHA,CAOA,IAAA8B,GACAX,WAAAvC,KAAAY,WAAA2B,WACAJ,eACAE,QAAA2C,EAAA,GACA5C,UAAA4C,EAAA,GACAM,WAAAL,EACA1E,cAAAP,KAAAO,eAEAP,KAAAyE,MAAA3B,EAAAI,GAAAE,KAAA,SAAAC,GACAC,QAAAC,IAAA,UAAAF,GACA,KAAAA,EAAAqB,MACAoB,EAAAP,SAAAO,EAAAlF,WAAA2B,cAEAsB,MAAA,SAAAC,GACAR,QAAAC,IAAA,OAAAO,UA1BA9D,KAAAkB,UACAC,QAAA,QACAC,KAAA,iBARApB,KAAAkB,UACAC,QAAA,UACAC,KAAA,aAkCA4E,WAtKA,WAuKA,QAAAhG,KAAAD,UACAC,KAAAQ,WAAAoD,MACAzD,MAAA,GACAM,OAAA,GACAC,QAAA,GACAC,MAAA,KAGAX,KAAAQ,WAAAoD,MACAlD,QAAA,GACAG,QAAAb,KAAAa,QACAV,MAAA,GACAQ,MAAA,GACAsF,SAAA,EACAxF,OAAA,GACAyF,UAAA,KAMAC,aA5LA,SA4LApF,GAAA,IAAAqF,EAAApG,KACAA,KAAAQ,WAAA6F,QAAA,SAAAC,EAAAC,GACAxF,GAAAwF,GACAH,EAAA5F,WAAAgG,OAAAD,EAAA,MAKAZ,UApMA,WAqMA3F,KAAAI,YAAA,GACAJ,KAAAO,cAAA,GACAP,KAAAM,aACAN,KAAAQ,aACAL,MAAA,GACAM,OAAA,GACAC,QAAA,GACAC,MAAA,OAIA8F,eCtjBeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA5G,KAAa6G,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,QAAaE,YAAA,OAAAC,IAAuBC,MAAAP,EAAA5C,UAAoB4C,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,KAAuCE,YAAA,wBAAkCL,EAAAQ,GAAA,KAAAL,EAAA,QAAAH,EAAAQ,GAAAR,EAAAS,GAAAT,EAAA7G,gBAAA6G,EAAAQ,GAAA,KAAAL,EAAA,OAAiFE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,aAAuBL,EAAAQ,GAAA,gCAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA+DE,YAAA,eAAyBL,EAAAQ,GAAA,gCAAAL,EAAA,YAAwDO,OAAOlG,KAAA,WAAAmG,KAAA,EAAAC,YAAA,QAAAC,QAAA,sBAAAC,OAAA,2BAAAC,UAAA,IAAoIC,OAAQzD,MAAAyC,EAAA,YAAAiB,SAAA,SAAAC,GAAiDlB,EAAAxG,YAAA,iBAAA0H,IAAAC,OAAAD,GAA2DE,WAAA,iBAA2BpB,EAAAQ,GAAA,KAAAL,EAAA,QAAyBE,YAAA,aAAuBL,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAvG,YAAA,aAAAuG,EAAAQ,GAAA,KAAAL,EAAA,OAAmEE,YAAA,eAAyBL,EAAAQ,GAAA,kCAAAL,EAAA,kBAAgEO,OAAOlG,KAAA,gBAAA6G,kBAAA,IAAAC,oBAAA,OAAAC,eAAA,YAAAC,kBAAA,QAA4HlB,IAAKmB,OAAAzB,EAAA1C,YAAwB0D,OAAQzD,MAAAyC,EAAA,UAAAiB,SAAA,SAAAC,GAA+ClB,EAAAtG,UAAAwH,GAAkBE,WAAA,gBAAyB,GAAApB,EAAAQ,GAAA,KAAAL,EAAA,OAA4BE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,SAAmBL,EAAAQ,GAAA,yCAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAwEE,YAAA,UAAoBF,EAAA,YAAiBO,OAAOE,YAAA,OAAAG,UAAA,EAAAF,QAAA,sBAAAC,OAAA,2BAAsGE,OAAQzD,MAAAyC,EAAA,cAAAiB,SAAA,SAAAC,GAAmDlB,EAAArG,cAAAuH,GAAsBE,WAAA,mBAA6BpB,EAAAQ,GAAA,KAAAL,EAAA,QAAAH,EAAAQ,GAAA,sBAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA4EE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,SAAmBL,EAAAQ,GAAA,oCAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAmEE,YAAA,aAAuBF,EAAA,MAAWE,YAAA,aAAuBL,EAAA0B,GAAA1B,EAAA,oBAAAN,EAAAC,GAA+C,OAAAQ,EAAA,MAAgBwB,IAAAhC,EAAAU,YAAA,SAA6BF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,KAAAH,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAiDE,YAAA,aAAuBF,EAAA,YAAiBO,OAAOlG,KAAA,WAAAmG,KAAA,EAAAC,YAAA,QAAAG,UAAA,GAAAF,QAAA,sBAAAC,OAAA,4BAAoIE,OAAQzD,MAAAmC,EAAA,MAAAuB,SAAA,SAAAC,GAA4ClB,EAAA4B,KAAAlC,EAAA,QAAAwB,IAA6BE,WAAA,iBAA0B,KAAApB,EAAAQ,GAAA,KAAAL,EAAA,OAA8BE,YAAA,eAAyBF,EAAA,KAAAH,EAAAQ,GAAA,QAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA+CE,YAAA,gBAA0BF,EAAA,YAAiBO,OAAOE,YAAA,OAAAG,UAAA,EAAAF,QAAA,sBAAAC,OAAA,2BAAsGE,OAAQzD,MAAAmC,EAAA,OAAAuB,SAAA,SAAAC,GAA6ClB,EAAA4B,KAAAlC,EAAA,SAAAwB,IAA8BE,WAAA,iBAA2BpB,EAAAQ,GAAA,KAAAL,EAAA,QAAyBE,YAAA,UAAoBL,EAAAQ,GAAA,4BAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA2DE,YAAA,WAAAC,IAA2BC,MAAA,SAAAsB,GAAyB,OAAA7B,EAAAT,aAAAI,OAAiCQ,EAAA,KAAUE,YAAA,wBAAkCL,EAAAQ,GAAA,KAAAL,EAAA,MAAuBE,YAAA,UAAAC,IAA0BC,MAAAP,EAAAZ,cAAwBe,EAAA,OAAYO,OAAOoB,IAAMC,EAAQ,cAAoC,OAAA/B,EAAAQ,GAAA,KAAAL,EAAA,OAAkCE,YAAA,WAAAC,IAA2BC,MAAAP,EAAAjB,aAAuBiB,EAAAQ,GAAA,gCAAAR,EAAAQ,GAAA,aAAAR,EAAA7G,UAAAgH,EAAA,OAAuFE,YAAA,aAAAC,IAA6BC,MAAAP,EAAA/B,gBAA0B+B,EAAAQ,GAAA,4BAAAL,EAAA,OAA+CE,YAAA,aAAAC,IAA6BC,MAAAP,EAAAf,gBAA0Be,EAAAQ,GAAA,iCAE19GwB,oBCCjB,IAcAC,EAdyBF,EAAQ,OAcjCG,CACElJ,EACA8G,GATF,EAVA,SAAAqC,GACEJ,EAAQ,SAaV,kBAEA,MAUeK,EAAA,QAAAH,EAAiB","file":"static/js/7.efc0e76e0f1cbad3bbd8.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAABVCAYAAAA49ahaAAAABHNCSVQICAgIfAhkiAAAAeJJREFUeJzt3MFOGlEUgOFzCfv6BrptLNENJOJCH6VvUnwT36S4UJKywASNy/oKJk1KAuV0xQ6mtrk/WPy/7U1mbv7MBCacodyNHzJUTUZetXa9iX1kVIBRAUYFGBVgVEC7abHf/VS2tZH/ye14OihRvmxa90oFGBVgVIBRAUYFGBVgVIBRAUYFND5R7dJk8v3g53x2sm4tY/ly3ju+3/aeXuvNRp0tfpxGKV/XrZXIm4i43PKWXs3bH2BUgFEBRgUYFWBUgFEBRgUYFWBUgFEBRgUYFWBUgFEBRgUYFWBUgFEBVX6jGk2ejnIehzWOtZK5OIkNg5yZ5cPdt6eLmueLiOj3Pt7UOE6VqMvF4nMpm+c1/83m0dhS4jTi17Du+f5w0r/g7Q8wKsCoAKMCjAqo8unfytZzlmWVryMrmeWglFg7SxWRLxGx37NUZ73j64i4rnGsldF4epmxfpYqIu773Y6zVO+JUQFGBRgVYFSAUQFGBRgVYFSAUQFGBRgVYFSAUQFGBRgVYFSAUQFGBRgV8Gb/ROGs2xlGpdmmbfNKBRgVYFSAUQFGBRgVYFSAUQFGBTQ+UY3Gj5XfONkPGdn4ulFj1Iwc1N3O++DtDzAqwKgAowKMCmhn5NWuN7FPWhHD39wSS+5bKqkAAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/addItem.png\n// module id = aoIN\n// module chunks = 2 7","<template>\r\n  <div class=\"activeAdd\">\r\n    <div class=\"container\">\r\n      <div class=\"activeTitle\">\r\n        <span class=\"back\" @click=\"goBack\">活动列表</span>\r\n        <i class=\"el-icon-arrow-right\"></i> \r\n        <span>{{titleName}}</span>\r\n      </div>\r\n      <div class=\"activeContent\">\r\n        <div class=\"baseInfo\">\r\n          基本信息\r\n        </div>\r\n        <div class=\"activeName\">\r\n          活动名称\r\n          <el-input\r\n            type=\"textarea\"\r\n            :rows=\"2\"\r\n            placeholder=\"请输入内容\"\r\n            onfocus=\"this.placeholder=''\" onblur=\"this.placeholder='请输入内容'\"\r\n            v-model.trim=\"activeNames\"\r\n            :maxlength='30'>\r\n          </el-input>\r\n          <span class=\"wordNums\">{{activeNums}}/30</span>\r\n        </div>\r\n        <div class=\"activeTime\">\r\n          活动时间\r\n            <el-date-picker\r\n              v-model=\"valueTime\"\r\n              type=\"datetimerange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              @change=\"selectTime\"\r\n              value-format=\"timestamp\"\r\n              end-placeholder=\"结束日期\">\r\n            </el-date-picker>\r\n        </div>\r\n        <div class=\"voteTimes\">\r\n          <div class=\"sign\">\r\n            同IP投票有效次数\r\n          </div>\r\n          <div class=\"times\">\r\n            <el-input v-model=\"ipVoteAstrict\" placeholder=\"1~99\" :maxlength='2' onfocus=\"this.placeholder=''\" onblur=\"this.placeholder='1~99'\"></el-input>\r\n            <span>次/天(0~24时)</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"voteSetting\">\r\n          <div class=\"sign\">\r\n            投票设置\r\n          </div>\r\n          <div class=\"voteList\">\r\n            <ul class=\"clearfix\">\r\n               <li class=\"Item\" v-for=\"(item,index) in editorData\" :key=\"index\">\r\n                  <div class=\"voteNames\">\r\n                    <p>评价内容</p>\r\n                    <div class=\"textArea\">\r\n                      <el-input\r\n                      type=\"textarea\"\r\n                      :rows=\"2\"\r\n                      placeholder=\"例:评论1\"\r\n                      v-model=\"item.title\"\r\n                      :maxlength='30'\r\n                      onfocus=\"this.placeholder=''\" onblur=\"this.placeholder='例:评论1'\">\r\n                      </el-input>\r\n                      <!-- <span class=\"wordNums\">0/30</span> -->\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"voteStatus\">\r\n                    <p>权重</p>\r\n                    <div class=\"votePercent\">\r\n                      <el-input v-model=\"item.weight\" placeholder=\"0~99\" :maxlength='5' onfocus=\"this.placeholder=''\" onblur=\"this.placeholder='0~99'\"></el-input>\r\n                      <span class=\"intro\">权重影响该评分在总评分中的重要性</span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"closeBtn\" @click=\"deleteOption(index)\">\r\n                    <i class=\"el-icon-close\"></i>\r\n                  </div>\r\n                </li>\r\n              <li class=\"addItem\" @click=\"addOptions\">\r\n                <img src=\"../../assets/images/addItem.png\">\r\n              </li>\r\n            </ul>\r\n\t        </div>\r\n        </div>\r\n        <div class=\"clearBtn\" @click=\"clearData\">\r\n          清除\r\n        </div>\r\n      </div>\r\n      <div class=\"confirmBtn\" @click=\"SaveActivity\" v-if=\"titleName=='添加活动'\">\r\n        确认添加\r\n      </div>\r\n      <div class=\"confirmBtn\" @click=\"EditActivity\" v-else>\r\n        确认修改\r\n      </div>    \r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.activeAdd{\r\n   text-align: left;\r\n   .container{\r\n    margin:60px 0 60px 260px;\r\n    .activeTitle{\r\n  \t  color: #a2a2a2;\r\n  \t  height: 58px;\r\n  \t  font-size: 14px;\r\n  \t  line-height: 58px;\r\n  \t  padding-left: 50px;\r\n      border-bottom: 1px solid #eee;\r\n      .back{\r\n        color: #5a5a5a;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    .activeContent{\r\n      padding: 5px 0 0 50px;\r\n      position: relative;\r\n      .baseInfo{\r\n        height: 60px;\r\n        line-height: 60px;\r\n        font-size: 20px;\r\n        letter-spacing: 1.88px;\r\n        color: #6d6a6a;\r\n        border-bottom: 1px solid #eeeeee;\r\n      }\r\n      .activeName,.activeTime{\r\n        height: 60px;\r\n        line-height: 60px;\r\n        color: #6d6a6a;\r\n        .el-textarea{\r\n          width: 370px;\r\n          height: 26px;\r\n          vertical-align: middle;\r\n          margin-left: 35px;\r\n        }\r\n        .wordNums{\r\n          font-size: 13px;\r\n          letter-spacing: 1.41px;\r\n          color: #bfbfbf;\r\n        }\r\n      }\r\n      .activeTime{\r\n        .el-date-editor{\r\n          width: 370px;\r\n          height: 26px;\r\n          line-height: 26px;\r\n          margin-left: 35px;\r\n        }\r\n      }\r\n      .voteTimes{\r\n        width: 370px;\r\n        height: 60px;\r\n        display: flex;\r\n        align-items: center;\r\n        color: #6d6a6a;\r\n        .sign{\r\n          width: 68px;\r\n        }\r\n        .times{\r\n          margin-left: 28px;\r\n          .el-input{\r\n            width: 55px;\r\n            height: 26px;\r\n          }\r\n        }\r\n      }\r\n      .voteSetting{\r\n        margin-top: 20px;\r\n        display:flex;\r\n        color: #6d6a6a;\r\n        .sign{\r\n          width: 68px;\r\n        }\r\n        .voteList{\r\n          margin-left: 30px;\r\n          ul{\r\n            .Item{\r\n              background-color: #f5f5f5;\r\n              border: 1px solid #e8e8e8;\r\n              width: 270px;\r\n              height: 120px;\r\n              float: left;\r\n              margin-right: 60px;\r\n              margin-bottom: 50px;\r\n              font-size: 14px;\r\n              letter-spacing: 1.41px;\r\n              color: #6d6a6a;\r\n              padding: 21px 32px;\r\n              cursor: pointer;\r\n              position: relative;\r\n              .voteNames{\r\n                .textArea{\r\n                  display: flex;\r\n                  align-items: center;\r\n                  margin-top: 5px;\r\n                  .wordNums{\r\n                    font-size: 12px;\r\n                    color: #bfbfbf;\r\n                    margin-left: 10px;\r\n                  }\r\n                }\r\n              }\r\n              .voteStatus{\r\n                margin-top:25px;\r\n                .votePercent{\r\n                  margin-top: 5px;\r\n                  .el-input{\r\n                    width: 39px;\r\n                    height: 26px;\r\n                  }\r\n                  .intro{\r\n                    font-size: 10px;\r\n                    letter-spacing: 1.41px;\r\n                    color: #b7b7b7;\r\n                  }\r\n                }\r\n              }\r\n              .closeBtn{\r\n                width: 12px;\r\n                height: 12px;\r\n                position: absolute;\r\n                right: 14px;\r\n                top:8px;\r\n                .el-icon-close{\r\n                  color: #c4c4c4;\r\n                }\r\n              }\r\n              .etiorBtn{\r\n                width: 31px;\r\n                height: 31px;\r\n                text-align: center;\r\n                line-height: 26px;\r\n                position: absolute;\r\n                right: 44px;\r\n                top:88px;\r\n                border-radius: 50%;\r\n                border: 1px solid #707070;\r\n                img{\r\n                  width: 18px;\r\n                  height: 16px;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          .addItem{\r\n            float: left;\r\n            margin-left: 40px;\r\n            cursor: pointer;\r\n            img{\r\n              width: 78px;\r\n              height: 78px;\r\n              margin:40px 0 0 0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .clearBtn{\r\n        background-color: #d3d3d3;\r\n        border-radius: 5px;\r\n        width: 150px;\r\n        height: 35px;\r\n        overflow: hidden;\r\n        font-size: 14px;\r\n        color: #00c5e2;\r\n        text-align: center;\r\n        line-height: 35px;\r\n        cursor: pointer;\r\n        position: absolute;\r\n        right: 122px;\r\n        top: 90px;\r\n      }\r\n      .clearBtn:hover{\r\n        opacity: 0.9;\r\n      }\r\n    }\r\n    .confirmBtn{\r\n      background-color: #4cb4e7;\r\n      border-radius: 5px;\r\n      width: 150px;\r\n      height: 35px;\r\n      overflow: hidden;\r\n      font-size: 14px;\r\n      color: #ffffff;\r\n      text-align: center;\r\n      line-height: 35px;\r\n      margin-left: 50px;\r\n      margin-top: 120px;\r\n      cursor: pointer;\r\n    }\r\n    .confirmBtn:hover{\r\n      opacity: 0.9;\r\n    }\r\n   }\r\n}\r\n</style>\r\n<script>\r\nimport {mapState} from 'vuex';\r\nexport default {\r\n  name:'activeDirectory',\r\n  data(){\r\n    return{\r\n       titleName:this.$route.query.title,\r\n       activeNames:'',//活动名称\r\n       activeNums:0,//活动字数\r\n       valueTime:[], //活动时间\r\n       ipVoteAstrict:'',//限制IP有效次数\r\n       editorData:[{\r\n          title :\"\" ,\r\n          weight :\"\",\r\n          item_id : \"\",\r\n          image : \"\"\r\n       }],//编辑内容\r\n       activeData:{},//编辑活动内容\r\n       vote_id:'',//投票id\r\n    }\r\n  },\r\n  watch: {\r\n    ipVoteAstrict (val) {\r\n       if(val!= \"\" && !this.IsInteger(Number(val))){\r\n          this.$message({\r\n            message:'请输入正确的整数值!',\r\n            type: 'warning'\r\n          })\r\n       } \r\n    },\r\n    editorData:{\r\n      handler: function (val) {\r\n        for(var i = 0 ; i < val.length  ; i ++){\r\n            if(!this.JudgeIsNaN(Number(val[i].weight))){\r\n              this.$message({\r\n                message:'请输入正确的权重值!',\r\n                type: 'warning'\r\n              })\r\n            }else if(parseFloat(val[i].weight)>99){\r\n              this.$message({\r\n                message:'权重值不能大于99!',\r\n                type: 'warning'\r\n              })\r\n            }\r\n          }\r\n      },      \r\n      deep: true    //深度监听\r\n    },\r\n    activeNames(val){\r\n      this.activeNums = val.length\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      userInfo:(state)=>state.mutations.userInfo\r\n    })\r\n  },\r\n  created() {\r\n    if(this.titleName == '编辑活动'){\r\n      let activeData = this.$route.query.activeData\r\n      this.activeData = activeData\r\n      this.activeNames = activeData.activityName\r\n      this.valueTime = [activeData.startDate,activeData.endDate]\r\n      this.GetVoteList(activeData.activityId)\r\n    }\r\n    this.verifyToken()\r\n  },\r\n  methods: {\r\n    //验证token是否过期\r\n    verifyToken() {\r\n        let accessToken = localStorage.getItem(\"accessToken\")\r\n        if (accessToken) {\r\n          let url =this.api.configIp+ this.net.verifyToken;\r\n          let params = {\r\n            accessToken: accessToken\r\n          }\r\n          this.$fetch(url,params).then((res)=>{\r\n            console.log('sucess:',res)\r\n            if(!res.success){\r\n              this.$message.warning(\"登录已经超时,需重新登陆\");\r\n              setTimeout(()=>{\r\n                this.$router.push({name:'login'})\r\n              },2000)\r\n            }\r\n          }).catch((err)=>{\r\n            console.log('err:',err)\r\n          })\r\n        }\r\n    },\r\n     //判断数值是否为整数\r\n    IsInteger(obj) {\r\n      return typeof obj === 'number' && obj%1 === 0 && obj>0\r\n    },\r\n    goBack(){\r\n      this.$router.back(-1)\r\n    },\r\n    selectTime(val){\r\n      console.log('选择时间:',val)\r\n      this.valueTime = val\r\n    },\r\n    JudgeIsNaN(value) {\r\n      return typeof value === 'number' && !isNaN(value);\r\n    },\r\n    //获取投票列表\r\n    GetVoteList(activityId){\r\n      let url = this.api.voteUrl + this.net.activityBlogList;\r\n      let params = {\r\n        activity_id:activityId\r\n      }\r\n      this.$post(url,params).then((res)=>{\r\n        console.log('sucess:',res)\r\n        if(res.code == 200 ){\r\n          this.editorData = res.data.items;\r\n          this.ipVoteAstrict = res.data.limit_vote_num;\r\n          this.vote_id = res.data.vote_id\r\n        }\r\n      }).catch((err)=>{\r\n        console.log('err:',err)\r\n      })\r\n    },\r\n    //添加活动\r\n    SaveActivity(){\r\n      let url = this.url + this.net.saveActivity;\r\n      let activityName = this.activeNames;\r\n      let time = this.valueTime;\r\n      let userId = this.userInfo.id;\r\n      let nowTime = new Date().getTime();//当前时间\r\n      if(activityName == ''){\r\n        this.$message({\r\n          message: '请填写活动名称',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }else if(!time[0]){\r\n        this.$message({\r\n          message: '请选择时间',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }else if(time[1]<nowTime){\r\n        this.$message({\r\n          message: '截止日期不能小于当前时间',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }\r\n      let params = {\r\n        \"activityName\" : activityName,\r\n        \"endDate\":time[1],\r\n        \"startDate\":time[0],\r\n        \"createUser\":userId,\r\n        \"ipVoteAstrict\":this.ipVoteAstrict\r\n      }\r\n      this.$post(url,params).then((res)=>{\r\n        //console.log('sucess:',res)\r\n        if(res.code == 200){\r\n          this.saveVote(res.data);\r\n          this.vote_id = ''\r\n        }\r\n      }).catch((err)=>{\r\n        console.log('err:',err)\r\n      })\r\n    },\r\n    //获取到活动id发起投票\r\n    saveVote(id){\r\n      let url = this.api.voteUrl + this.net.saveVote;\r\n      let params = {\r\n        'vote_id':this.vote_id,//vote_id为空表示新增，否则为编辑\r\n        'activity_id':id,\r\n        'title':this.activeNames,\r\n        'deadline':this.getdate(this.valueTime[1]),\r\n        'items':this.editorData,\r\n        'limit_vote_num':this.ipVoteAstrict\r\n      }\r\n      this.$post(url,params).then((res)=>{\r\n        if(res.code == 200){\r\n          this.$message({\r\n            message: '保存成功',\r\n            type: 'success'\r\n          });\r\n          this.clearData()\r\n          this.$router.back(-1)\r\n        }else{\r\n          this.$message.error('保存失败!')\r\n        }\r\n      }).catch((err)=>{\r\n        console.log('err:',err)\r\n      })\r\n    },\r\n    //编辑活动\r\n    EditActivity(){\r\n      let url = this.url + this.net.editActivity;\r\n      let activityName = this.activeNames;\r\n      let time = this.valueTime;\r\n      let userId = this.userInfo.id;\r\n      let nowTime = new Date().getTime();//当前时间\r\n      if(activityName == ''){\r\n        this.$message({\r\n          message: '请填写活动名称',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }else if(!time[0]){\r\n        this.$message({\r\n          message: '请选择时间',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }else if(time[1]<nowTime){\r\n        this.$message({\r\n          message: '截止日期不能小于当前时间',\r\n          type: 'warning'\r\n        });\r\n        return;\r\n      }\r\n      let params = {\r\n        \"activityId\":this.activeData.activityId,\r\n        \"activityName\" : activityName,\r\n        \"endDate\":time[1],\r\n        \"startDate\":time[0],\r\n        \"createUser\":userId,\r\n        \"ipVoteAstrict\":this.ipVoteAstrict\r\n      }\r\n      this.$post(url,params).then((res)=>{\r\n        console.log('sucess:',res)\r\n        if(res.code == 200){\r\n          this.saveVote(this.activeData.activityId)\r\n        }\r\n      }).catch((err)=>{\r\n        console.log('err:',err)\r\n      })\r\n    },\r\n    //添加编辑选项\r\n    addOptions(){\r\n      if(this.titleName == '添加活动'){\r\n        this.editorData.push({\r\n          title :\"\" ,\r\n          weight :\"\",\r\n          item_id : \"\",\r\n          image : \"\"\r\n        });\r\n      }else{\r\n        this.editorData.push({\r\n          item_id : \"\",\r\n          vote_id: this.vote_id,\r\n          title :\"\" ,\r\n          image : \"\",\r\n          vote_num:0,\r\n          weight :\"\",\r\n          is_delete:0\r\n        });\r\n      }\r\n      \r\n    },\r\n    //删除编辑选项\r\n    deleteOption(val){\r\n      this.editorData.forEach((item,index) => {\r\n         if(val == index){\r\n           this.editorData.splice(index, 1)\r\n         }\r\n      });\r\n    },\r\n    //清空数据\r\n    clearData(){\r\n      this.activeNames = '';\r\n      this.ipVoteAstrict = '';\r\n      this.valueTime = [];\r\n      this.editorData =[{\r\n        title :\"\" ,\r\n        weight :\"\",\r\n        item_id : \"\",\r\n        image : \"\"\r\n      }]\r\n    }\r\n  },\r\n  components:{\r\n\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/achievementDiscuss/activeAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"activeAdd\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"activeTitle\"},[_c('span',{staticClass:\"back\",on:{\"click\":_vm.goBack}},[_vm._v(\"活动列表\")]),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-arrow-right\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.titleName))])]),_vm._v(\" \"),_c('div',{staticClass:\"activeContent\"},[_c('div',{staticClass:\"baseInfo\"},[_vm._v(\"\\n          基本信息\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"activeName\"},[_vm._v(\"\\n          活动名称\\n          \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"请输入内容\",\"onfocus\":\"this.placeholder=''\",\"onblur\":\"this.placeholder='请输入内容'\",\"maxlength\":30},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"activeNames\"}}),_vm._v(\" \"),_c('span',{staticClass:\"wordNums\"},[_vm._v(_vm._s(_vm.activeNums)+\"/30\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"activeTime\"},[_vm._v(\"\\n          活动时间\\n            \"),_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"value-format\":\"timestamp\",\"end-placeholder\":\"结束日期\"},on:{\"change\":_vm.selectTime},model:{value:(_vm.valueTime),callback:function ($$v) {_vm.valueTime=$$v},expression:\"valueTime\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"voteTimes\"},[_c('div',{staticClass:\"sign\"},[_vm._v(\"\\n            同IP投票有效次数\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"times\"},[_c('el-input',{attrs:{\"placeholder\":\"1~99\",\"maxlength\":2,\"onfocus\":\"this.placeholder=''\",\"onblur\":\"this.placeholder='1~99'\"},model:{value:(_vm.ipVoteAstrict),callback:function ($$v) {_vm.ipVoteAstrict=$$v},expression:\"ipVoteAstrict\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"次/天(0~24时)\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"voteSetting\"},[_c('div',{staticClass:\"sign\"},[_vm._v(\"\\n            投票设置\\n          \")]),_vm._v(\" \"),_c('div',{staticClass:\"voteList\"},[_c('ul',{staticClass:\"clearfix\"},[_vm._l((_vm.editorData),function(item,index){return _c('li',{key:index,staticClass:\"Item\"},[_c('div',{staticClass:\"voteNames\"},[_c('p',[_vm._v(\"评价内容\")]),_vm._v(\" \"),_c('div',{staticClass:\"textArea\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"例:评论1\",\"maxlength\":30,\"onfocus\":\"this.placeholder=''\",\"onblur\":\"this.placeholder='例:评论1'\"},model:{value:(item.title),callback:function ($$v) {_vm.$set(item, \"title\", $$v)},expression:\"item.title\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"voteStatus\"},[_c('p',[_vm._v(\"权重\")]),_vm._v(\" \"),_c('div',{staticClass:\"votePercent\"},[_c('el-input',{attrs:{\"placeholder\":\"0~99\",\"maxlength\":5,\"onfocus\":\"this.placeholder=''\",\"onblur\":\"this.placeholder='0~99'\"},model:{value:(item.weight),callback:function ($$v) {_vm.$set(item, \"weight\", $$v)},expression:\"item.weight\"}}),_vm._v(\" \"),_c('span',{staticClass:\"intro\"},[_vm._v(\"权重影响该评分在总评分中的重要性\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"closeBtn\",on:{\"click\":function($event){return _vm.deleteOption(index)}}},[_c('i',{staticClass:\"el-icon-close\"})])])}),_vm._v(\" \"),_c('li',{staticClass:\"addItem\",on:{\"click\":_vm.addOptions}},[_c('img',{attrs:{\"src\":require(\"../../assets/images/addItem.png\")}})])],2)])]),_vm._v(\" \"),_c('div',{staticClass:\"clearBtn\",on:{\"click\":_vm.clearData}},[_vm._v(\"\\n          清除\\n        \")])]),_vm._v(\" \"),(_vm.titleName=='添加活动')?_c('div',{staticClass:\"confirmBtn\",on:{\"click\":_vm.SaveActivity}},[_vm._v(\"\\n        确认添加\\n      \")]):_c('div',{staticClass:\"confirmBtn\",on:{\"click\":_vm.EditActivity}},[_vm._v(\"\\n        确认修改\\n      \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c2bd57d0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/achievementDiscuss/activeAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c2bd57d0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./activeAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./activeAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./activeAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c2bd57d0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./activeAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c2bd57d0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/achievementDiscuss/activeAdd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}